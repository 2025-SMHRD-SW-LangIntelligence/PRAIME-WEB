<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- CSS -->
<link th:href="@{/css/font.css}" rel="stylesheet">
<link th:href="@{/css/common.css}" rel="stylesheet">
<link th:href="@{/css/farmlog/view.css}" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/js/farmlog/view.js}"></script>

<title>영농일지 상세 페이지</title>
</head>
<body>
	<div class="container">
		<header>
			<div class="header-group">
				<a href="#" class="prevPage" onclick="history.back()"> &lt; </a>
				<div class="header-title-group">
					<span class="header-title">일지 상세</span>
				</div>
			</div>
		</header>

		<main class="detail-main">
			<section class="detail-section">

				<p class="label">작물</p>
				<p class="value" th:text="${log.dlcrop} ?: '작물 정보 없음'">작물</p>

				<p class="label">제목</p>
				<p class="value" th:text="${log.dltitle} ?: '제목 없음'">제목</p>

				<p class="label">내용</p>
				<p class="value" th:text="${log.dlcontent} ?: '내용 없음'">내용</p>

				<p class="label">날짜</p>
				<p class="value" th:text="${log.dldate} ?: '날짜 정보 없음'">날짜</p>

				<p class="label">날씨</p>
				<p class="value" th:text="${log.dlweather} ?: '날씨 정보 없음'">날씨</p>

				<div class="label">사진</div>
				<div class="detail-images">
					<!-- 이미지가 있을 때: 모든 이미지 표시 -->
					<div th:if="${not #lists.isEmpty(log.dlimage)}">
						<img th:each="img : ${log.dlimage}"
							th:src="@{'/uploads/farmlog/' + ${img.dlipath}}" class="preview-image"
							alt="일지 이미지" />
					</div>
					<!-- 이미지가 없을 때: 기본 이미지 표시 -->
					<div th:if="${#lists.isEmpty(log.dlimage)}">
						<img th:src="@{/img/log.png}" class="preview-image"
							alt="기본 이미지" />
					</div>
				</div>

				<div class="detail-buttons">
					<!-- 수정 버튼 -->
					<button class="btn edit-btn"
						th:onclick="|location.href='/farmlog/edit?id=${log.dlid}'|">
						<i class="fas fa-edit"></i> 수정
					</button>

					<!-- 삭제 버튼 -->
					<button class="btn delete-btn"
						th:onclick="|deleteDiary(${log.dlid})|">
						<i class="fas fa-trash-alt"></i> 삭제
					</button>
				</div>

			</section>
		</main>
	</div>
</body>
</html>
